<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <title>Vesna | project</title>
  </head>
  <body>
      <header class="header">
        <section class="header__first-line">
          <div class="header__logo">
            <a href="#" class="header__logo-link" target="_blank">
              <img
                src="./assets/icons/header-logo.svg"
                alt="логотип компании Весна"
                class="header__img"
              />
            </a>
          </div>
          <nav class="header__nav">
            <ul class="header__nav-list">
              <li class="header__nav-list-item">
                <a href="#" class="header__nav-list-item-link">Главная</a>
              </li>
              <li class="header__nav-list-item">
                <a href="#" class="header__nav-list-item-link">Портфолио</a>
              </li>
              <li class="header__nav-list-item">
                <a href="#" class="header__nav-list-item-link">Услуги</a>
              </li>
              <li class="header__nav-list-item">
                <a href="#" class="header__nav-list-item-link">Контакты</a>
              </li>
            </ul>
          </nav>
          <div class="header__buttons">
            <a href="tel:+79218888888" class="button header__tel-link">+7 (921) 888 88 88</a>
              <!-- Кнопка для открытия формы -->
            <div class="popup-open__button-container">
                <button class="button button--transparent" onclick="openWindow('consult__popupWindow')">
                  Бесплатная консультация
                </button>
            </div>
          </div>
          <!-- контейнер для размытия элементов за попапом -->
          <div class="popup-overlay" id="overlay"></div>
          <!-- сам попап -->
          <div class="popup" id="consult__popupWindow">
            <div class="popup__wrapper">
                <button class="close-btn" onclick="closewindow('consult__popupWindow')">
                    <span></span>
                </button>
                <h2 class="popup__title">Закажите консультацию</h2>
                <p class="popup__description">Менеджер перезвонит Вам в&nbsp;ближайшее время</p>
                <form action="submit" class="form">
                  <div class="form__input-group">
                    <div class="form__input-container">
                      <input
                        type="text"
                        name="name"
                        id="order-consult__userName"
                        placeholder=" "
                        class="form__input-field form__input-field--name"
                        required
                      />
                      <label for="order-consult__userName" class="form__input-label">Имя</label>
                    </div>
                    <div class="form__input-container">
                      <input
                        type="tel"
                        id="order-consult__userPhone"
                        name="phone"
                        placeholder=" "
                        pattern="[0-9]{3}-[0-9]{3}-[0-9]{2}-[0-9]{2}"
                        class="form__input-field form__input-field--tel"
                        required
                      />
                      <label for="order-consult__userPhone" class="form__input-label--default"
                        >+7 (___) ___ __ __</label
                      >
                      <label for="order-consult__userPhone" class="form__input-label--focus"
                        >Телефон</label
                      >
                    </div>
                    <div class="form__consent-container">
                      <input
                        type="checkbox"
                        name="popup-order-consult__userConsent"
                        id="popup-order-consult__userConsent"
                        class="form__consent-checkbox"
                        checked
                        required
                      />
                      <label for="popup-order-consult__userConsent" class="form__consent-label"
                        >Я даю согласие на обработку своих
                        <a href="#" class="form__consent-link"
                          >персональных данных</a
                        ></label
                      >
                    </div>
                  </div>
                  <div class="popup__button-container">
                    <button type="submit"
                    class="button button--olive-large">
                      Перезвоните мне
                    </button>
                </form>
            </div>
        </div>
      </div>
        <!-- контейнер для скрытого бургер-меню -->
          <div class="hamburger-menu">
            <input
              id="menu__toggle"
              type="checkbox"
              class="hamburger-menu__toggle"/>
            <label class="hamburger-menu__btn" for="menu__toggle">
              <span class="hamburger-menu__icon"></span>
            </label>
            <ul class="menu__box">
              <li class="menu__item">
                <a href="#" class="menu__item-link">Главная</a>
              </li>
              <li class="menu__item">
                <a href="#" class="menu__item-link">Портфолио</a>
              </li>
              <li class="menu__item">
                <a href="#" class="menu__item-link">Услуги</a>
              </li>
              <li class="menu__item">
                <a href="#" class="menu__item-link">Контакты</a>
              </li>
              <li class="menu__item">
                <a href="tel:+79218888888" class="button menu__item-tel-link">+7 (921) 888 88 88</a>
              </li>
              <li class="menu__item">
                <div class="popup-open__button-container">
                    <button class="button button--transparent" onclick="openWindow('consult__popupWindow')">
                      Бесплатная консультация
                    </button>
                </div>
              </li>
            </ul>
          </div>
        </section>
      </header>
    <main class="main"></main>
    <footer class="footer"></footer>

    <script>
      document
        .getElementById("userPhone")
        .addEventListener("input", function (e) {
          const input = e.target;
          let value = input.value.replace(/\D/g, "");

          // Проверяем, если пользователь удалил цифры, чтобы не перезаписывать ввод
          if (e.inputType === "deleteContentBackward") {
            input.value = input.value;
            return;
          }

          // Добавляем "+7" в начало, если пользователь его еще не ввел
          if (value.startsWith("7")) {
            value = value.substring(1);
          }

          let formattedValue = "+7 (";

          if (value.length > 0) formattedValue += value.substring(0, 3);
          if (value.length >= 4) formattedValue += ") " + value.substring(3, 6);
          if (value.length >= 7) formattedValue += " " + value.substring(6, 8);
          if (value.length >= 9) formattedValue += " " + value.substring(8, 10);

          input.value = formattedValue;
        });
    </script>
    <script>
        function openWindow(popupId) {
          document.getElementById(popupId).style.display = "block";
          document.getElementById('overlay').style.display = 'block';
        }

        function closewindow(popupId) {
          document.getElementById(popupId).style.display = "none";
          document.getElementById('overlay').style.display = "none";
        }
    </script>
  </body>
</html>
