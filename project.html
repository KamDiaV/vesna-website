<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <title>Vesna | project</title>
  </head>
  <body>
    <header class="header"></header>
    <main class="main">
      <section class="order-service">
        <h2 class="order-service__title">
          Свяжитесь с нами, чтобы заказать услугу
        </h2>
        <div class="order-service__contacts">
          <p class="order-service__contacts-city">Санкт-Петербург</p>
          <p class="order-service__contacts-tel">
            <a href="tel:+79218888888" class="order-service__contacts-tel-link"
              >+7(921) 888 88 88</a
            >
          </p>
          <p class="order-service__contacts-email">
            <a
              href="mailto:info@vesna.ru"
              class="order-service__contacts-email-link"
              >info@vesna.ru</a
            >
          </p>
          <p class="order-service__contacts-insta">
            <a href="#" class="order-service__contacts-insta-link">
              <img
                src="./assets/icons/insta.svg"
                alt="иконка сайта Инстаграм"
                class="order-service__contacts-insta-icon"
              />
            </a>
          </p>
        </div>
        <form action="submit" class="form">
          <div class="form__input-container">
            <input
              type="text"
              name="name"
              id="userName"
              class="form__input-field form__input-field--name"
              required
            />
            <label for="userName" class="form__input-label">Имя</label>
          </div>
          <div class="form__input-container">
            <input
              type="email"
              name="email"
              id="userEmail"
              class="form__input-field form__input-field--email"
              required
            />
            <label for="userEmail" class="form__input-label">Email</label>
          </div>
          <div class="form__input-container">
            <input
              type="tel"
              id="userPhone"
              name="phone"
              placeholder="+7 (___) ___ __ __"
              pattern="[0-9]{3}-[0-9]{3}-[0-9]{2}-[0-9]{2}"
              class="form__input-field form__input-field--tel"
              required
            />
            <label for="userPhone" class="form__input-label--default"
              >+7 (___) ___ __ __</label
            >
            <label for="userPhone" class="form__input-label--focus"
              >Телефон</label
            >
          </div>
          <div class="form__comments-container">
            <textarea
              name="comments"
              id="userComments"
              placeholder="Комментарий"
              class="form__comments-field"
            ></textarea>
            <label
              for="userComments"
              class="form__comments-label--default form__input-label--default"
              >Комментарий</label
            >
            <label
              for="userComments"
              class="form__comments-label--focus form__input-label--focus"
              >Комментарий</label
            >
          </div>
          <div class="form__consent-container">
            <input
              type="checkbox"
              name="order-service__form-consent"
              id="userConsent"
              class="form__consent-checkbox"
              checked
            />
            <label for="userConsent" class="form__consent-label"
              >Я даю согласие на обработку своих персональных данных</label
            >
          </div>

          <div class="order-service__button-container">
            <button type="submit">Отправить</button>
          </div>
        </form>
      </section>
    </main>
    <footer class="footer"></footer>

    <script>
      document
        .getElementById("userPhone")
        .addEventListener("input", function (e) {
          const input = e.target;
          let value = input.value.replace(/\D/g, ""); // Убираем все нецифровые символы

          // Проверяем, если пользователь удалил цифры, чтобы не перезаписывать ввод
          if (e.inputType === "deleteContentBackward") {
            input.value = input.value;
            return;
          }

          // Добавляем "+7" в начало, если пользователь его еще не ввел
          if (value.startsWith("7")) {
            value = value.substring(1);
          }

          let formattedValue = "+7 (";

          if (value.length > 0) formattedValue += value.substring(0, 3);
          if (value.length >= 4) formattedValue += ") " + value.substring(3, 6);
          if (value.length >= 7) formattedValue += " " + value.substring(6, 8);
          if (value.length >= 9) formattedValue += " " + value.substring(8, 10);

          input.value = formattedValue;
        });
    </script>
  </body>
</html>
